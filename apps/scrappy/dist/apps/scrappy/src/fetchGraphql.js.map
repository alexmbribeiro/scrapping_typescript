{
  "version": 3,
  "sources": ["../../../../src/fetchGraphql.ts"],
  "sourcesContent": ["import { getId } from './utils';\n\nconst _userAgent = process.env.USER_AGENT;\nconst _xIgAppId = process.env.X_IG_APP_ID;\n\nif (!_userAgent || !_xIgAppId) {\n  console.error(\"Required headers not found in ENV\");\n  process.exit(1);\n}\n\nexport const getInstagramGraphqlData = async (url: string) => {\n  const igId = getId(url);\n  if (!igId) return \"Invalid URL\";\n\n  const graphql = new URL(`https://www.instagram.com/api/graphql`);\n  graphql.searchParams.set(\"variables\", JSON.stringify({ shortcode: igId }));\n  graphql.searchParams.set(\"doc_id\", \"10015901848480474\");\n  graphql.searchParams.set(\"lsd\", \"AVqbxe3J_YA\");\n\n  const response = await fetch(graphql, {\n    method: \"POST\",\n    headers: {\n      \"User-Agent\": _userAgent,\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      \"X-IG-App-ID\": _xIgAppId,\n      \"X-FB-LSD\": \"AVqbxe3J_YA\",\n      \"X-ASBD-ID\": \"129477\",\n      \"Sec-Fetch-Site\": \"same-origin\"\n    }\n  });\n\n  const json = await response.json();\n  const items = json?.data?.xdt_shortcode_media;\n\n  if (!items) return null;\n\n  return {\n    __typename: items?.__typename,\n    shortcode: items?.shortcode,\n    dimensions: items?.dimensions,\n    display_url: items?.display_url,\n    display_resources: items?.display_resources,\n    has_audio: items?.has_audio,\n    video_url: items?.video_url,\n    video_view_count: items?.video_view_count,\n    video_play_count: items?.video_play_count,\n    is_video: items?.is_video,\n    caption: items?.edge_media_to_caption?.edges?.[0]?.node?.text,\n    is_paid_partnership: items?.is_paid_partnership,\n    location: items?.location,\n    owner: items?.owner,\n    product_type: items?.product_type,\n    video_duration: items?.video_duration,\n    thumbnail_src: items?.thumbnail_src,\n    clips_music_attribution_info: items?.clips_music_attribution_info,\n    sidecar: items?.edge_sidecar_to_children?.edges,\n  };\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAsB;AAEtB,MAAM,aAAa,QAAQ,IAAI;AAC/B,MAAM,YAAY,QAAQ,IAAI;AAE9B,IAAI,CAAC,cAAc,CAAC,WAAW;AAC7B,UAAQ,MAAM,mCAAmC;AACjD,UAAQ,KAAK,CAAC;AAChB;AAEO,MAAM,0BAA0B,OAAO,QAAgB;AAC5D,QAAM,WAAO,oBAAM,GAAG;AACtB,MAAI,CAAC;AAAM,WAAO;AAElB,QAAM,UAAU,IAAI,IAAI,uCAAuC;AAC/D,UAAQ,aAAa,IAAI,aAAa,KAAK,UAAU,EAAE,WAAW,KAAK,CAAC,CAAC;AACzE,UAAQ,aAAa,IAAI,UAAU,mBAAmB;AACtD,UAAQ,aAAa,IAAI,OAAO,aAAa;AAE7C,QAAM,WAAW,MAAM,MAAM,SAAS;AAAA,IACpC,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,kBAAkB;AAAA,IACpB;AAAA,EACF,CAAC;AAED,QAAM,OAAO,MAAM,SAAS,KAAK;AACjC,QAAM,QAAQ,MAAM,MAAM;AAE1B,MAAI,CAAC;AAAO,WAAO;AAEnB,SAAO;AAAA,IACL,YAAY,OAAO;AAAA,IACnB,WAAW,OAAO;AAAA,IAClB,YAAY,OAAO;AAAA,IACnB,aAAa,OAAO;AAAA,IACpB,mBAAmB,OAAO;AAAA,IAC1B,WAAW,OAAO;AAAA,IAClB,WAAW,OAAO;AAAA,IAClB,kBAAkB,OAAO;AAAA,IACzB,kBAAkB,OAAO;AAAA,IACzB,UAAU,OAAO;AAAA,IACjB,SAAS,OAAO,uBAAuB,QAAQ,CAAC,GAAG,MAAM;AAAA,IACzD,qBAAqB,OAAO;AAAA,IAC5B,UAAU,OAAO;AAAA,IACjB,OAAO,OAAO;AAAA,IACd,cAAc,OAAO;AAAA,IACrB,gBAAgB,OAAO;AAAA,IACvB,eAAe,OAAO;AAAA,IACtB,8BAA8B,OAAO;AAAA,IACrC,SAAS,OAAO,0BAA0B;AAAA,EAC5C;AACF;",
  "names": []
}
